---
intent: "é¡¹ç›®æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—ï¼ˆä¸­æ–‡ç‰ˆï¼‰"
role: documentation
when_to_load: "åˆæ¬¡å®‰è£…æˆ–æŸ¥é˜…ä½¿ç”¨è¯´æ˜Ž"
---

# Code Frontmatter (CFM)

[![npm version](https://img.shields.io/npm/v/code-frontmatter.svg?style=flat-square)](https://www.npmjs.com/package/code-frontmatter)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=flat-square)](https://opensource.org/licenses/MIT)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](https://makeapullrequest.com)

> **ä»£ç æ–‡ä»¶çš„â€œèº«ä»½è¯â€ã€‚**
> **è®© AI ä»…ç”¨ < 5% çš„ Token æˆæœ¬å°±èƒ½ç†è§£ä½ çš„æ•´ä¸ªä»£ç åº“ã€‚**

---

**Code Frontmatter (CFM)** æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†å’Œ [MCP (Model Context Protocol)](https://modelcontextprotocol.io/) æœåŠ¡å™¨ï¼Œç”¨äºŽç®¡ç†æºä»£ç æ–‡ä»¶ä¸­çš„ç»“æž„åŒ–å…ƒæ•°æ®ã€‚

é€šè¿‡åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ è½»é‡çº§çš„ YAML å¤´éƒ¨ï¼Œä½ å¯ä»¥å°†ä»£ç åº“ä»Žæ™®é€šçš„â€œæ–‡æœ¬æ–‡ä»¶é›†åˆâ€å‡çº§ä¸ºä¸€å¼ â€œè¯­ä¹‰å›¾è°±â€ï¼Œè®© AI åŠ©æ‰‹ï¼ˆå¦‚ Cursorã€Windsurfã€Claudeï¼‰èƒ½å¤Ÿå³æ—¶ã€å‡†ç¡®åœ°å¯¼èˆªã€‚

## ðŸš€ ä¸ºä»€ä¹ˆè¦ç”¨ CFM?

AI ç¼–ç¨‹åŠ©æ‰‹åœ¨å¤„ç†å¤§åž‹ä»£ç åº“æ—¶å¸¸é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š
1.  **ä¸Šä¸‹æ–‡æº¢å‡º**ï¼šè¯»å–æ‰€æœ‰æ–‡ä»¶ä»¥ç†è§£æž¶æž„ä¼šæ¶ˆè€—å·¨å¤§çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆä¸”æ˜‚è´µï¼‰ã€‚
2.  **å¹»è§‰**ï¼šAI éœ€çŒœæµ‹æ–‡ä»¶ç”¨é€”ï¼Œå®¹æ˜“å¯¼è‡´ Bugã€‚
3.  **ç›²åŒº**ï¼šAgent ä¸çŸ¥é“åŽ»å“ªé‡Œå¯»æ‰¾ç‰¹å®šçš„é€»è¾‘ã€‚

**CFM é€šè¿‡æš´éœ²é«˜å±‚æ„å›¾ã€æž¶æž„è§’è‰²å’Œä¾èµ–å…³ç³»å›¾ï¼Œè§£å†³äº†è¿™äº›é—®é¢˜ï¼Œä¸”æ— éœ€ AI è¯»å–ä»£ç æ­£æ–‡ã€‚**

| æŒ‡æ ‡ | ä¸ä½¿ç”¨ CFM | ä½¿ç”¨ CFM |
| :--- | :--- | :--- |
| **ä¸Šä¸‹æ–‡æˆæœ¬** | 100% (å…¨æºç ) | **~3-5% (ä»…å¤´éƒ¨)** |
| **æ£€ç´¢é€Ÿåº¦** | æ…¢ (Grep/Read) | **å³æ—¶ (è¯­ä¹‰ç´¢å¼•)** |
| **å‡†ç¡®æ€§** | æ¦‚çŽ‡æ€§çŒœæµ‹ | **ç¡®å®šæ€§** |

## ðŸ“¦ å®‰è£…

æœ¬é¡¹ç›®è®¾è®¡ä¸º **Model Context Protocol (MCP)** æœåŠ¡å™¨ã€‚

### 1. é€‚ç”¨äºŽ [Cursor](https://cursor.sh)

å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°ä½ çš„ `~/.cursor/mcp.json`ï¼ˆæˆ–è€…é€šè¿‡ Cursor è®¾ç½®ç•Œé¢æ·»åŠ ï¼‰ï¼š

```json
{
  "mcpServers": {
    "code-frontmatter": {
      "command": "npx",
      "args": ["-y", "code-frontmatter"]
    }
  }
}
```

### 2. é€‚ç”¨äºŽ [Claude Desktop](https://claude.ai/download)

å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°ä½ çš„ `claude_desktop_config.json`ï¼š

```json
{
  "mcpServers": {
    "code-frontmatter": {
      "command": "npx",
      "args": ["-y", "code-frontmatter"]
    }
  }
}
```

## ðŸ¤– AI Agent æŒ‡å¼• (å…³é”®æ­¥éª¤)

**ä¸ºäº†å……åˆ†åˆ©ç”¨ CFMï¼Œä½ å¿…é¡»æ˜Žç¡®æŒ‡ç¤ºä½ çš„ AI åŠ©æ‰‹ä½¿ç”¨å®ƒã€‚**
AI æ¨¡åž‹é€šå¸¸æ¯”è¾ƒâ€œæ‡’â€ï¼Œé™¤éžæ˜Žç¡®å‘ŠçŸ¥ï¼Œå¦åˆ™å®ƒä»¬å€¾å‘äºŽçŒœæµ‹è€Œä¸æ˜¯è°ƒç”¨å·¥å…·ã€‚

**è¯·å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶å¹¶ç²˜è´´åˆ°ä½ çš„é¡¹ç›®è§„åˆ™ (`.cursorrules` / `.windsurfrules`) æˆ–è‡ªå®šä¹‰æŒ‡ä»¤ä¸­ï¼š**

```markdown
# Code Frontmatter Protocol (CFM)

æœ¬é¡¹ç›®ä½¿ç”¨ Code Frontmatter (CFM) ç®¡ç†æ–‡ä»¶å…ƒæ•°æ®ã€‚
ä½ å¿…é¡»ä¸¥æ ¼éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š

1.  **åˆå§‹åŒ–ä¸Šä¸‹æ–‡**ï¼šåœ¨ä¼šè¯å¼€å§‹æ—¶ï¼ŒåŠ¡å¿…åœ¨é¡¹ç›®æ ¹ç›®å½•è°ƒç”¨ `cfm_read` (æˆ– `cfm_scan`) ä»¥æž„å»ºä½ çš„å¿ƒç†åœ°å›¾ã€‚
    - ä¸è¦ä½¿ç”¨ `ls -R` åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ã€‚è¯·ä½¿ç”¨ `cfm_read`ã€‚
2.  **æœç´¢ä¼˜å…ˆ**ï¼šå½“æŸ¥æ‰¾ç‰¹å®šåŠŸèƒ½ï¼ˆä¾‹å¦‚â€œè®¤è¯é€»è¾‘â€ï¼‰æ—¶ï¼Œåœ¨è¯»å–æ–‡ä»¶å†…å®¹ä¹‹å‰ï¼Œå…ˆä½¿ç”¨ `cfm_search`ã€‚
3.  **ç»´æŠ¤å¤´éƒ¨**ï¼š
    - åˆ›å»ºæ–°æ–‡ä»¶æ—¶ï¼Œå¿…é¡»ç”Ÿæˆæœ‰æ•ˆçš„ CFM å¤´éƒ¨ï¼ˆintent, role, exportsï¼‰ã€‚
    - ä¿®æ”¹ä»£ç æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ `cfm_write` æ›´æ–°å¤´éƒ¨ä¸­çš„ `exports` å’Œ `ai_notes`ã€‚
    - ä¿æŒ `ai_notes` ç®€ç»ƒã€‚åªå­˜å‚¨æ°¸ä¹…æ€§çš„æž¶æž„çº¦æŸï¼Œä¸è¦è®°å½•å˜æ›´æ—¥å¿—ã€‚
```

## ðŸ›  ä½¿ç”¨æ–¹æ³• & è¯­æ³•

### å¤´éƒ¨æ ¼å¼

CFM åœ¨ä½ æ‰€ç”¨è¯­è¨€çš„æ ‡å‡†æ³¨é‡Šè¯­æ³•ä¸­ä½¿ç”¨ YAML å—ã€‚

**TypeScript / JavaScript / Java / C#:**
```typescript
/*---
intent: "å¤„ç† JWT ä»¤ç‰ŒéªŒè¯å’Œè½®æ¢"
role: service
exports:
  - "verifyToken: æ£€æŸ¥ç­¾å"
  - "refreshToken: å‘å‘æ–°è®¿é—®ä»¤ç‰Œ"
depends_on: ["config.ts", "db-client.ts"]
ai_notes: "ä¸è¦ä¿®æ”¹å¯†é’¥æ´¾ç”Ÿé€»è¾‘ã€‚"
---*/

export function verifyToken(token) { ... }
```

**Python / Ruby / Shell / YAML:**
```python
#---
# intent: "ç”¨æˆ·æ•°æ®æ¨¡åž‹å®šä¹‰"
# role: model
# domain: "identity"
# mutates_state: false
#---

class User(BaseModel): ...
```

### å¯ç”¨å·¥å…·

ä½œä¸º MCP æœåŠ¡å™¨å®‰è£…åŽï¼Œä½ çš„ AI å°†èŽ·å¾—ä»¥ä¸‹è¶…èƒ½åŠ›ï¼š

*   **`cfm_read({ directory })`**:
    *   è¿”å›žä¸€ä¸ªJSONå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰æ–‡ä»¶çš„æ¦‚è¦ï¼ˆè·¯å¾„ã€æ„å›¾ã€è§’è‰²ã€å¯¼å‡ºï¼‰ã€‚
    *   *é€‚ç”¨åœºæ™¯ï¼šåˆå§‹åŒ–ä¼šè¯ä¸Šä¸‹æ–‡ã€‚*
*   **`cfm_search({ query, role, domain })`**:
    *   å¯¹å¤´éƒ¨è¿›è¡Œè¯­ä¹‰æœç´¢ã€‚
    *   *é€‚ç”¨åœºæ™¯ï¼šâ€œæŸ¥æ‰¾å“ªå¤„ç†ç”¨æˆ·è®¡è´¹â€ã€‚*
*   **`cfm_write({ file, intent, ... })`**:
    *   å†™å…¥æˆ–æ›´æ–°å¤´éƒ¨ã€‚
    *   *é€‚ç”¨åœºæ™¯ï¼šåˆ›å»ºæ–°æ–‡ä»¶æˆ–æ›´æ–°æ–‡æ¡£ã€‚*
*   **`cfm_register_language({ name, extensions, ... })`**:
    *   æ•™æœåŠ¡å™¨å¦‚ä½•è§£æžè‡ªå®šä¹‰æ–‡ä»¶ç±»åž‹çš„å¤´éƒ¨ã€‚

## ðŸ¤ è´¡çŒ®ä»£ç 

æˆ‘ä»¬å¸Œæœ›å°†å…¶æ‰“é€ ä¸º AI-Code äº¤äº’çš„è¡Œä¸šæ ‡å‡†ã€‚
1.  Fork æœ¬ä»“åº“ã€‚
2.  åˆ›å»ºä¸€ä¸ªç‰¹æ€§åˆ†æ”¯ã€‚
3.  æäº¤ PRã€‚

**å…³æ³¨é¢†åŸŸï¼š**
- æ›´å¤šè¯­è¨€çš„è§£æžå™¨ (Rust, Go, Swift)ã€‚
- IDE æ‰©å±• (VS Code, JetBrains)ã€‚
- åˆ†æžå·¥å…·ã€‚

## ðŸ“„ è®¸å¯è¯

MIT Â© 2026 [coobi7](https://github.com/coobi7)
